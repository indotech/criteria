# Основные

## Задачи

### Задача, багфикс или подпроект есть в трекере

### Задача, подзадача или задание выполнены полностью
Если задача выполнена не полностью, то внутри задачи есть комментарий, что пошло не так.
И почему задача не выполнена полностью.

### Задача выполнена в отдельной ветке
Задачу нужно начинать в отдельной от `master` и `develop` веток.

У себя локально:
**Для задачи**
1. Перейти в `develop`
2. `git pull`
3. `git checkout -b my-awesome-branch`, где `my-awesome-branch` — имя ветки для задания

Или для пункта **3** можно использовать инструменты вроде `git flow`

**Для хотфикса**
1. Перейти в `develop`
2. `git pull`
3. Перейти в `master`
4. `git pull`
5. `git checkout -b my-awesome-hotfix-branch`, где `my-awesome-hotfix-branch` — имя ветки для задания

Или для пункта **5** можно использовать инструменты вроде `git flow`

### Для задачи написаны Юнит-тесты
Вот тут [небольшая заметка о тестах](https://paper.dropbox.com/doc/--AtYaXMOcHDdJIDbcZ2UB1yRUAg-V3glWFHtgeEz7RlQpK8Ch)

### При выполнении кода задания не возникает необработанных ошибок

### Линтинг кода не выводит ошибок или предупрежений

## Git

### `master` и `develop` получают изменения только из Пул Реквестов
Пушить напрямую измения в мастер и девелоп нельзя.

Вносите изменения у себя локально в отдельной ветке.
Потом пушите все в форк (если он возможен, если нет, то в основной репозиторий) и через панель Гитхаба или Битбакета создаете Пул Реквест.

### Пул Реквесты для `master` и `develop` обязательно проходят кросс-ревью
Кто-то должен проверить ваши изменения до того, как они попадут в `develop` или `master`.

Когда Пул Реквест создан, попросите коллегу с нужным доступом проверить ваш код, дать замечания если они нужны,
и когда все решено принять его и смержить (для этого в Пул Реквесте есть специальная кнопочка).

### Текст коммита должен начинаться с номера задачи в трекере, если это не Хотфикс без задачи
Это нужно чтобы быстро находить нужную задачу по коммиту и находить нужный коммит по задаче.
```
ABC-123 Что-то сделал, точно чему-то научился,
знать бы что еще я сделал, чтобы в будущем этого не делать.
```

Критерий может быть опущен, если по какой-то причине задача не добавлена в трекер, или на подпроекте нет трекера.

### Текст коммита записывается от первого лица
Как пример можно начинать с глаголов: Сделал, Починил, Переместил, Удалил и т. д.

### Из текста коммита понятно что было сделано
```
ABC-123 Добавил метод Screens.swap в RPC
Теперь с клиента можно отправить действие перетаскивания экранов и сохранить эти изменения на лету.
```

### Текст коммита не дублирует текст задачи

### Текст хотфикса начинается с HOT:

### Если для хотфикса есть задача, то в тексте коммита номер задачи идет перед `HOT:`

### Результаты сборки добавлены в .gitignore

### Файл .gitkeep добавлен в папки с результатами сборки
Нужно добавить в папку результатов сборки файл `.gitkeep`,
нужно чтобы папка оставалась в гите, а вот содержимое игнорировалось.

Чтобы добавить `.gitkeep` в индекс можно воспользоваться флагом `-f`.
Например вы добавили папку `build` в `.gitignore`.
Теперь нужно сделать чтобы при клонировании репозитория папка была пустой.

```
touch build/.gitkeep
git add -f build/.gitkeep
```
Теперь папка останется в репозитории, при этом ее содержимое будет игнорироваться гитом.

### Папки внешними модулями добавлены в .gitignore

### Локальные конфигурации добавлены в .gitignore

### Если для локальных конфигураций есть отдельная папка, то в нее добавлен .gitkeep

### В основной репозиторий нельзя пушить временные ветки, вроде веток для фич

### Совместрая работа над ветками проводится только в зеркальном репозитории
В основном репозитории ветки фич не должны появляться,
но при этом нужно чтобы оставалась возможность создавать Пул Реквесты и работать над фичами самостоятельно.

Для этого основной репозиторий нужно форкнуть.
Если это невозможно по какой-то причине, скорее всего у репозитория есть зеркало на томже аккаунте.
В нем и кипит работа, публикуются ветки и т. д.
Из него уже нужно создавать PR сперва в самого себя, а потом в основную ветку.

# Дополнительные

## Зачачи

### При выполнении задачи, код должен стать чище, чем был до вашего прихода

### Если для выполнения задачи нужен значительный рефакторинг, то под него в трекере нужно создать отдельную связанную задачу
Задача может выглядеть как-то так:
```
Упростить и исправить код модуля такого-то

Описание
Нужно для качественного выполнения задачи такой-то
```

### Задачи по рефакторингу выполняются по возможности сразу
Технический долг нужно отдать до того, как задача отправится в бой.
Обычно чистый код — чище и безопасней, чем грязный.

### Для задачи написаны интеграционные и/или модульные тесты
[Небольшая заметка о тестах](https://paper.dropbox.com/doc/--AtYaXMOcHDdJIDbcZ2UB1yRUAg-V3glWFHtgeEz7RlQpK8Ch)

### Для задачи написаны приемочные тесты
[Небольшая заметка о тестах](https://paper.dropbox.com/doc/--AtYaXMOcHDdJIDbcZ2UB1yRUAg-V3glWFHtgeEz7RlQpK8Ch)

## Git

### Число коммитов минимизировано
Просто не нужно захломлять гит лишними мусорными коммитами

### Коммит, который чинит прошлый «поломанный» коммит вместо описания может состоять из `:boom:`
Допустим вы совершили ошибку, и запушили сломанный код.
Например не добавили важный файл в индекс, или не обновили модули.

Вы можете следом послать коммит с описанием `:boom:`, все поймут, что случилась оплошность.
Вы ее нашли и исправили.

```
ABC-123 :boom:
```

Это просто, коротко, и весело :boom: :boom: :boom:

### В коммите для починки коммита, который чинил поломанный коммит можно поставить несколько `:boom:`
Допустим вы оплошали и во второй раз. Не беда, пошлите два `:boom:`, все поймут, что вы невнимательны.
Возможно просто устали и вечер.
```
ABC-123 :boom: :boom:
```

### Нельзя злоупотреблять `:boom:`
Не стоит шлёпать больше трех коммитов с `:boom:`.
Соберитесь и почините уже все.

:boom: :boom: :boom: :boom: :boom:
